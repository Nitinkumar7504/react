{"ast":null,"code":"import _objectSpread from\"C:/react/my-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from\"react\";import{BrowserRouter as Router,Routes,Route,Navigate,Outlet}from\"react-router-dom\";import UserCard from\"./components/UserCard.jsx\";import ProductPage from\"./components/ProductPage.jsx\";import BuyNowPage from\"./components/buynowpage.jsx\";import AddProduct from\"./components/AddProduct.jsx\";import Login from\"./components/Login.jsx\";import Signup from\"./components/Sign.jsx\";import Navbar from\"./components/Navbar.jsx\";// ✅ Private Route Wrapper\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PrivateRoute=()=>{return localStorage.getItem(\"token\")?/*#__PURE__*/_jsx(Outlet,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true});};function App(){const[user,setUser]=useState(!!localStorage.getItem(\"token\"));const[products,setProducts]=useState(()=>JSON.parse(localStorage.getItem(\"products\"))||[]);// ✅ Sync products with localStorage\nuseEffect(()=>{localStorage.setItem(\"products\",JSON.stringify(products));},[products]);// ✅ Log User State for Debugging\nuseEffect(()=>{console.log(\"User state updated:\",user);},[user]);// ✅ Logout Function\nconst logout=()=>{localStorage.removeItem(\"token\");setUser(false);};// ✅ Add Product Function\nconst addProduct=newProduct=>{setProducts(prevProducts=>[...prevProducts,_objectSpread(_objectSpread({},newProduct),{},{id:Date.now().toString()})]);};return/*#__PURE__*/_jsxs(Router,{children:[user&&/*#__PURE__*/_jsx(Navbar,{logout:logout}),/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Navigate,{to:user?\"/dashboard\":\"/login\"})}),/*#__PURE__*/_jsxs(Route,{element:/*#__PURE__*/_jsx(PrivateRoute,{}),children:[/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",element:/*#__PURE__*/_jsx(UserCard,{products:products,setProducts:setProducts,logout:logout})}),/*#__PURE__*/_jsx(Route,{path:\"/add-product\",element:/*#__PURE__*/_jsx(AddProduct,{addProduct:addProduct})})]}),/*#__PURE__*/_jsx(Route,{path:\"/product/:id\",element:/*#__PURE__*/_jsx(ProductPage,{products:products})}),/*#__PURE__*/_jsx(Route,{path:\"/buy-now\",element:/*#__PURE__*/_jsx(BuyNowPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{setUser:setUser})}),/*#__PURE__*/_jsx(Route,{path:\"/signup\",element:/*#__PURE__*/_jsx(Signup,{})})]})})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Routes","Route","Navigate","Outlet","UserCard","ProductPage","BuyNowPage","AddProduct","Login","Signup","Navbar","jsx","_jsx","jsxs","_jsxs","PrivateRoute","localStorage","getItem","to","replace","App","user","setUser","products","setProducts","JSON","parse","setItem","stringify","console","log","logout","removeItem","addProduct","newProduct","prevProducts","_objectSpread","id","Date","now","toString","children","className","path","element"],"sources":["C:/react/my-app/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { BrowserRouter as Router, Routes, Route, Navigate, Outlet } from \"react-router-dom\";\nimport UserCard from \"./components/UserCard.jsx\";\nimport ProductPage from \"./components/ProductPage.jsx\";\nimport BuyNowPage from \"./components/buynowpage.jsx\";\nimport AddProduct from \"./components/AddProduct.jsx\";\nimport Login from \"./components/Login.jsx\";\nimport Signup from \"./components/Sign.jsx\"; \nimport Navbar from \"./components/Navbar.jsx\";\n\n// ✅ Private Route Wrapper\nconst PrivateRoute = () => {\n  return localStorage.getItem(\"token\") ? <Outlet /> : <Navigate to=\"/login\" replace />;\n};\n\nfunction App() {\n  const [user, setUser] = useState(!!localStorage.getItem(\"token\")); \n  const [products, setProducts] = useState(() => JSON.parse(localStorage.getItem(\"products\")) || []);\n\n  // ✅ Sync products with localStorage\n  useEffect(() => {\n    localStorage.setItem(\"products\", JSON.stringify(products));\n  }, [products]);\n\n  // ✅ Log User State for Debugging\n  useEffect(() => {\n    console.log(\"User state updated:\", user);\n  }, [user]);\n\n  // ✅ Logout Function\n  const logout = () => {\n    localStorage.removeItem(\"token\");\n    setUser(false);\n  };\n\n  // ✅ Add Product Function\n  const addProduct = (newProduct) => {\n    setProducts((prevProducts) => [\n      ...prevProducts,\n      { ...newProduct, id: Date.now().toString() }, \n    ]);\n  };\n\n  return (\n    <Router>\n      {user && <Navbar logout={logout} />}\n      <div className=\"container\">\n        <Routes>\n          {/* ✅ Redirect Home Based on Auth */}\n          <Route path=\"/\" element={<Navigate to={user ? \"/dashboard\" : \"/login\"} />} />\n\n          {/* ✅ Private Routes */}\n          <Route element={<PrivateRoute />}>\n            <Route path=\"/dashboard\" element={<UserCard products={products} setProducts={setProducts} logout={logout} />} />\n            <Route path=\"/add-product\" element={<AddProduct addProduct={addProduct} />} />\n          </Route>\n\n          {/* ✅ Public Routes */}\n          <Route path=\"/product/:id\" element={<ProductPage products={products} />} />\n          <Route path=\"/buy-now\" element={<BuyNowPage />} />\n          <Route path=\"/login\" element={<Login setUser={setUser} />} />\n          <Route path=\"/signup\" element={<Signup />} />\n        </Routes>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}