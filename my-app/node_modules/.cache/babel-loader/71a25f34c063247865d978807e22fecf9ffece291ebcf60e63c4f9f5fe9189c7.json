{"ast":null,"code":"import _objectSpread from\"C:/react/my-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from\"react\";import{useLocation}from\"react-router-dom\";import\"./buynowpage.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BuyNowPage=()=>{var _location$state;const location=useLocation();const product=(_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.product;const[formData,setFormData]=useState({name:\"\",email:\"\",address:\"\",phone:\"\"});const[loading,setLoading]=useState(false);const handleChange=e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.name]:e.target.value}));};const handleSubmit=async e=>{e.preventDefault();setLoading(true);try{if(!product){alert(\"❌ No product selected!\");setLoading(false);return;}// ✅ Define orderData before using it\nconst orderData=_objectSpread(_objectSpread({},formData),{},{product});console.log(\"Sending Order:\",orderData);const response=await fetch(\"http://localhost:5000/api/orders\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(orderData)});const data=await response.json();if(response.ok){alert(\"✅ Order placed successfully!\");console.log(\"Order Success:\",data);setFormData({name:\"\",email:\"\",address:\"\",phone:\"\"});}else{alert(\"\\u274C Error: \".concat(data.error||\"Failed to place order\"));console.error(\"Order Error:\",data);}}catch(error){alert(\"❌ Network error! Check console for details.\");console.error(\"Network Error:\",error);}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"buy-now-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Buy Now\"}),product?/*#__PURE__*/_jsxs(\"div\",{className:\"product-preview\",children:[/*#__PURE__*/_jsx(\"img\",{src:product.img||\"/placeholder.jpg\",alt:product.name,className:\"product-img\"}),/*#__PURE__*/_jsx(\"h3\",{children:product.name}),/*#__PURE__*/_jsx(\"p\",{children:product.description}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Price:\"}),\" $\",product.price]})]}):/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:\"\\u274C No product selected!\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"buy-now-form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",placeholder:\"Your Name\",value:formData.name,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",placeholder:\"Your Email\",value:formData.email,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"address\",placeholder:\"Your Address\",value:formData.address,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"phone\",placeholder:\"Your Phone Number\",value:formData.phone,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,children:loading?\"Submitting...\":\"Submit Order\"})]})]});};export default BuyNowPage;","map":{"version":3,"names":["React","useState","useLocation","jsx","_jsx","jsxs","_jsxs","BuyNowPage","_location$state","location","product","state","formData","setFormData","name","email","address","phone","loading","setLoading","handleChange","e","_objectSpread","target","value","handleSubmit","preventDefault","alert","orderData","console","log","response","fetch","method","headers","body","JSON","stringify","data","json","ok","concat","error","className","children","src","img","alt","description","price","onSubmit","type","placeholder","onChange","required","disabled"],"sources":["C:/react/my-app/src/components/buynowpage.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport \"./buynowpage.css\";\r\n\r\nconst BuyNowPage = () => {\r\n  const location = useLocation();\r\n  const product = location.state?.product;\r\n\r\n  const [formData, setFormData] = useState({\r\n    name: \"\",\r\n    email: \"\",\r\n    address: \"\",\r\n    phone: \"\",\r\n  });\r\n\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    try {\r\n      if (!product) {\r\n        alert(\"❌ No product selected!\");\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      // ✅ Define orderData before using it\r\n      const orderData = { ...formData, product };\r\n\r\n      console.log(\"Sending Order:\", orderData);\r\n\r\n      const response = await fetch(\"http://localhost:5000/api/orders\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(orderData),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (response.ok) {\r\n        alert(\"✅ Order placed successfully!\");\r\n        console.log(\"Order Success:\", data);\r\n        setFormData({ name: \"\", email: \"\", address: \"\", phone: \"\" });\r\n      } else {\r\n        alert(`❌ Error: ${data.error || \"Failed to place order\"}`);\r\n        console.error(\"Order Error:\", data);\r\n      }\r\n    } catch (error) {\r\n      alert(\"❌ Network error! Check console for details.\");\r\n      console.error(\"Network Error:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"buy-now-container\">\r\n      <h2>Buy Now</h2>\r\n\r\n      {product ? (\r\n        <div className=\"product-preview\">\r\n          <img src={product.img || \"/placeholder.jpg\"} alt={product.name} className=\"product-img\" />\r\n          <h3>{product.name}</h3>\r\n          <p>{product.description}</p>\r\n          <p><strong>Price:</strong> ${product.price}</p>\r\n        </div>\r\n      ) : (\r\n        <p className=\"error\">❌ No product selected!</p>\r\n      )}\r\n\r\n      <form className=\"buy-now-form\" onSubmit={handleSubmit}>\r\n        <input type=\"text\" name=\"name\" placeholder=\"Your Name\" value={formData.name} onChange={handleChange} required />\r\n        <input type=\"email\" name=\"email\" placeholder=\"Your Email\" value={formData.email} onChange={handleChange} required />\r\n        <input type=\"text\" name=\"address\" placeholder=\"Your Address\" value={formData.address} onChange={handleChange} required />\r\n        <input type=\"text\" name=\"phone\" placeholder=\"Your Phone Number\" value={formData.phone} onChange={handleChange} required />\r\n        <button type=\"submit\" disabled={loading}>\r\n          {loading ? \"Submitting...\" : \"Submit Order\"}\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BuyNowPage;\r\n"],"mappings":"oGAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE1B,KAAM,CAAAC,UAAU,CAAGA,CAAA,GAAM,KAAAC,eAAA,CACvB,KAAM,CAAAC,QAAQ,CAAGP,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAQ,OAAO,EAAAF,eAAA,CAAGC,QAAQ,CAACE,KAAK,UAAAH,eAAA,iBAAdA,eAAA,CAAgBE,OAAO,CAEvC,KAAM,CAACE,QAAQ,CAAEC,WAAW,CAAC,CAAGZ,QAAQ,CAAC,CACvCa,IAAI,CAAE,EAAE,CACRC,KAAK,CAAE,EAAE,CACTC,OAAO,CAAE,EAAE,CACXC,KAAK,CAAE,EACT,CAAC,CAAC,CAEF,KAAM,CAACC,OAAO,CAAEC,UAAU,CAAC,CAAGlB,QAAQ,CAAC,KAAK,CAAC,CAE7C,KAAM,CAAAmB,YAAY,CAAIC,CAAC,EAAK,CAC1BR,WAAW,CAAAS,aAAA,CAAAA,aAAA,IAAMV,QAAQ,MAAE,CAACS,CAAC,CAACE,MAAM,CAACT,IAAI,EAAGO,CAAC,CAACE,MAAM,CAACC,KAAK,EAAE,CAAC,CAC/D,CAAC,CAED,KAAM,CAAAC,YAAY,CAAG,KAAO,CAAAJ,CAAC,EAAK,CAChCA,CAAC,CAACK,cAAc,CAAC,CAAC,CAClBP,UAAU,CAAC,IAAI,CAAC,CAEhB,GAAI,CACF,GAAI,CAACT,OAAO,CAAE,CACZiB,KAAK,CAAC,wBAAwB,CAAC,CAC/BR,UAAU,CAAC,KAAK,CAAC,CACjB,OACF,CAEA;AACA,KAAM,CAAAS,SAAS,CAAAN,aAAA,CAAAA,aAAA,IAAQV,QAAQ,MAAEF,OAAO,EAAE,CAE1CmB,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAEF,SAAS,CAAC,CAExC,KAAM,CAAAG,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,kCAAkC,CAAE,CAC/DC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACT,SAAS,CAChC,CAAC,CAAC,CAEF,KAAM,CAAAU,IAAI,CAAG,KAAM,CAAAP,QAAQ,CAACQ,IAAI,CAAC,CAAC,CAElC,GAAIR,QAAQ,CAACS,EAAE,CAAE,CACfb,KAAK,CAAC,8BAA8B,CAAC,CACrCE,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAEQ,IAAI,CAAC,CACnCzB,WAAW,CAAC,CAAEC,IAAI,CAAE,EAAE,CAAEC,KAAK,CAAE,EAAE,CAAEC,OAAO,CAAE,EAAE,CAAEC,KAAK,CAAE,EAAG,CAAC,CAAC,CAC9D,CAAC,IAAM,CACLU,KAAK,kBAAAc,MAAA,CAAaH,IAAI,CAACI,KAAK,EAAI,uBAAuB,CAAE,CAAC,CAC1Db,OAAO,CAACa,KAAK,CAAC,cAAc,CAAEJ,IAAI,CAAC,CACrC,CACF,CAAE,MAAOI,KAAK,CAAE,CACdf,KAAK,CAAC,6CAA6C,CAAC,CACpDE,OAAO,CAACa,KAAK,CAAC,gBAAgB,CAAEA,KAAK,CAAC,CACxC,CAAC,OAAS,CACRvB,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,mBACEb,KAAA,QAAKqC,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChCxC,IAAA,OAAAwC,QAAA,CAAI,SAAO,CAAI,CAAC,CAEflC,OAAO,cACNJ,KAAA,QAAKqC,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9BxC,IAAA,QAAKyC,GAAG,CAAEnC,OAAO,CAACoC,GAAG,EAAI,kBAAmB,CAACC,GAAG,CAAErC,OAAO,CAACI,IAAK,CAAC6B,SAAS,CAAC,aAAa,CAAE,CAAC,cAC1FvC,IAAA,OAAAwC,QAAA,CAAKlC,OAAO,CAACI,IAAI,CAAK,CAAC,cACvBV,IAAA,MAAAwC,QAAA,CAAIlC,OAAO,CAACsC,WAAW,CAAI,CAAC,cAC5B1C,KAAA,MAAAsC,QAAA,eAAGxC,IAAA,WAAAwC,QAAA,CAAQ,QAAM,CAAQ,CAAC,KAAE,CAAClC,OAAO,CAACuC,KAAK,EAAI,CAAC,EAC5C,CAAC,cAEN7C,IAAA,MAAGuC,SAAS,CAAC,OAAO,CAAAC,QAAA,CAAC,6BAAsB,CAAG,CAC/C,cAEDtC,KAAA,SAAMqC,SAAS,CAAC,cAAc,CAACO,QAAQ,CAAEzB,YAAa,CAAAmB,QAAA,eACpDxC,IAAA,UAAO+C,IAAI,CAAC,MAAM,CAACrC,IAAI,CAAC,MAAM,CAACsC,WAAW,CAAC,WAAW,CAAC5B,KAAK,CAAEZ,QAAQ,CAACE,IAAK,CAACuC,QAAQ,CAAEjC,YAAa,CAACkC,QAAQ,MAAE,CAAC,cAChHlD,IAAA,UAAO+C,IAAI,CAAC,OAAO,CAACrC,IAAI,CAAC,OAAO,CAACsC,WAAW,CAAC,YAAY,CAAC5B,KAAK,CAAEZ,QAAQ,CAACG,KAAM,CAACsC,QAAQ,CAAEjC,YAAa,CAACkC,QAAQ,MAAE,CAAC,cACpHlD,IAAA,UAAO+C,IAAI,CAAC,MAAM,CAACrC,IAAI,CAAC,SAAS,CAACsC,WAAW,CAAC,cAAc,CAAC5B,KAAK,CAAEZ,QAAQ,CAACI,OAAQ,CAACqC,QAAQ,CAAEjC,YAAa,CAACkC,QAAQ,MAAE,CAAC,cACzHlD,IAAA,UAAO+C,IAAI,CAAC,MAAM,CAACrC,IAAI,CAAC,OAAO,CAACsC,WAAW,CAAC,mBAAmB,CAAC5B,KAAK,CAAEZ,QAAQ,CAACK,KAAM,CAACoC,QAAQ,CAAEjC,YAAa,CAACkC,QAAQ,MAAE,CAAC,cAC1HlD,IAAA,WAAQ+C,IAAI,CAAC,QAAQ,CAACI,QAAQ,CAAErC,OAAQ,CAAA0B,QAAA,CACrC1B,OAAO,CAAG,eAAe,CAAG,cAAc,CACrC,CAAC,EACL,CAAC,EACJ,CAAC,CAEV,CAAC,CAED,cAAe,CAAAX,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}